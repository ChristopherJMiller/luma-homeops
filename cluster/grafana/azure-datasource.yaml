apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-datasource-azure
  namespace: prometheus
  labels:
    grafana_datasource: "1"
data:
  azure-monitor.yaml: |
    apiVersion: 1
    datasources:
    - name: Azure Monitor
      type: grafana-azure-monitor-datasource
      access: proxy
      jsonData:
        cloudName: azuremonitor
        subscriptionId: ddc1f03e-6903-4508-a23d-1754eb304cad
        logAnalyticsDefaultWorkspace: 7e100cb4-3907-4540-8bf1-fb596260b75b
        tenantId: $__env{AZURE_TENANT_ID}
        clientId: $__env{AZURE_CLIENT_ID}
      secureJsonData:
        clientSecret: $__env{AZURE_CLIENT_SECRET}