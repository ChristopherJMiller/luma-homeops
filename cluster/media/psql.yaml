---
apiVersion: acid.zalan.do/v1
kind: postgresql
metadata:
  name: acid-arr-configs
  namespace: media
spec:
  preparedDatabases:
    sonarr-main: {}
    sonarr-log: {}
    radarr-main: {}
    radarr-log: {}
    lidarr-main: {}
    lidarr-log: {}
    readarr-main: {}
    readarr-log: {}
  numberOfInstances: 1
  spiloRunAsUser: 101
  spiloRunAsGroup: 103
  spiloFSGroup: 103
  postgresql:
    version: '14'
  teamId: acid
  users:
    postgres:
      - superuser
      - createdb
  volume:
    storageClass: freenas-nfs-ssd-csi
    size: 30Gi
---
apiVersion: v1
kind: Service
metadata:
  name: psql
  namespace: media
spec:
  ports:
    - port: 5432
      targetPort: 5432
      protocol: TCP
      name: psql
  selector:
    cluster-name: acid-arr-configs
